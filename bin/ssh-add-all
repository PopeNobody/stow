#!/usr/bin/perl
# vim: ts=2 sw=2 ft=perl
eval 'exec perl -x -wS $0 ${1+"$@"}'
  if 0;

use strict;
use warnings;
BEGIN {
  use FindBin qw($Bin);
  use lib "$Bin/../lib/perl";
  $|++; $\="\n"; $,=" "; $"=" "; $\="\n";
};
use autodie qw(:all);
use Data::Dump;
use Env qw( $HOME );

print "HOME=$HOME";
chdir($HOME);
chdir(".ssh");

my @list;
sub add($) {
  print STDERR "add(@_)";
  push(@list,shift);
};
for( grep { s{\.pub$}{} || 1 } glob("*.pub") ) {
  add($_);
};
for( glob("*.pem") ) {
  add($_);
};
print for @list;
system("ssh-add @list");
